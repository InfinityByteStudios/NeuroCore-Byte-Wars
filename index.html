<!DOCTYPE html>
<html lang="en">
<head>    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroCore: Byte Wars</title>    <link rel="icon" type="image/png" href="assets/Logos/NeuroCore Byte Wars Logo.png">
    <link rel="shortcut icon" type="image/png" href="assets/Logos/NeuroCore Byte Wars Logo.png">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>    <!-- Studio Splash Screen -->
    <div id="studioSplash" class="splash-screen active">
        <div class="splash-content">
            <img src="assets/Logos/InfinityByte Studios 1920√ó1080.png" alt="InfinityByte Studio" class="splash-logo">
            <div class="splash-subtitle">Presents</div>
            <div class="splash-loading">
                <div class="loading-squares">
                    <div class="loading-square"></div>
                    <div class="loading-square"></div>
                    <div class="loading-square"></div>
                </div>
            </div>
        </div>
    </div>    <!-- Game Logo Splash Screen -->
    <div id="gameSplash" class="splash-screen">
        <div class="splash-content">
            <img src="assets/Logos/NeuroCore Byte Wars Logo.png" alt="NeuroCore Byte Wars" class="splash-logo game-logo">
            <div class="splash-loading">
                <div class="loading-squares">
                    <div class="loading-square"></div>
                    <div class="loading-square"></div>
                    <div class="loading-square"></div>
                </div>
            </div>        </div>
    </div>

    <!-- Audio Prompt Overlay -->
    <div id="audioPrompt" class="audio-prompt hidden">
        <div class="audio-prompt-content">
            <div class="audio-prompt-icon">üéµ</div>
            <div class="audio-prompt-title">AUDIO EXPERIENCE</div>
            <div class="audio-prompt-text">Click to enable immersive sci-fi soundtrack</div>
            <button id="enableAudioBtn" class="audio-prompt-button">ENABLE AUDIO</button>
            <button id="continueWithoutAudioBtn" class="audio-prompt-button secondary">CONTINUE WITHOUT AUDIO</button>
        </div>
    </div>

<div id="gameContainer">
        <canvas id="gameCanvas" tabindex="0"></canvas>
          <!-- HUD Overlay -->
        <div id="hudOverlay"><!-- Settings Button (Top Left) -->
            <div class="settings-button" id="settingsButton">
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
            </div>
              <!-- Health Bar -->
            <div class="health-container">
                <div class="health-panel">
                    <div class="health-label">‚ó§ NEURAL INTEGRITY ‚ó•</div>
                    <div class="health-bar">
                        <div class="health-fill" id="healthFill"></div>
                        <div class="health-text" id="healthText">100/100</div>
                    </div>                    <div class="health-warning" id="healthWarning" style="display: none;">‚ö† CRITICAL DAMAGE ‚ö†</div>
                    <div class="shield-indicator" id="shieldIndicator" style="display: none;">‚ó¶ SHIELD ACTIVE ‚ó¶</div>
                </div>
            </div>
              <!-- OVERCLOCK BAR COMPLETELY REMOVED TO ELIMINATE GREEN BAR ISSUE -->
            <!-- The overclock system still works, but no visual bar is displayed -->
            
            <!-- Neural Overclock System -->
            <div class="overclock-container">
                <div class="overclock-panel" id="overclockPanel">
                    <div class="overclock-label" id="overclockLabel">‚ó§ NEURAL OVERCLOCK ‚ó•</div>
                    <div class="overclock-bar">
                        <div class="overclock-fill" id="overclockFill"></div>
                        <div class="overclock-text" id="overclockText">CHARGE: 0/100</div>
                    </div>
                    <div class="overclock-ready" id="overclockReady" style="display: none;">‚ó¶ OVERCLOCK READY ‚ó¶</div>
                    <div class="overclock-effects" id="overclockEffects" style="display: none;">‚ó¶ NEURAL BOOST ACTIVE ‚ó¶</div>
                </div>
            </div>
              
              <!-- Dash Indicator -->
            <div class="dash-container">
                <div class="dash-panel">
                    <div class="dash-label">‚ó§ NEURAL DASH ‚ó•</div>
                    <div class="dash-bar">
                        <div class="dash-fill" id="dashFill"></div>
                        <div class="dash-text" id="dashText">DASH READY</div>
                    </div>
                </div>
            </div>
            
            <!-- Safe Zone Timer -->
            <div class="safezone-container">
                <div class="safezone-panel" id="safezonePanel">
                    <div class="safezone-label" id="safezoneLabel">‚ó§ SAFE ZONE ‚ó•</div>
                    <div class="safezone-bar" id="safezoneBar">
                        <div class="safezone-fill" id="safezoneFill"></div>
                        <div class="safezone-text" id="safezoneText">AVAILABLE</div>
                    </div>
                    <div class="safezone-status" id="safezoneStatus"></div>
                </div>
            </div>            <!-- Stats Panel -->
            <div class="stats-container">
                <div class="stats-panel">
                    <div class="stats-title">‚ó§ COMBAT STATUS ‚ó•</div>
                    <div class="stats-item" id="scoreDisplay">SCORE: 0</div>
                    <div class="stats-item" id="killsDisplay">KILLS: 0</div>
                    <div class="stats-item" id="survivalTimeDisplay">TIME: 0:00</div>
                </div>
            </div>
            
            <!-- Wave Information Panel -->
            <div class="wave-container">
                <div class="wave-panel">
                    <div class="wave-title" id="waveTitle">‚ó§ WAVE 1 ‚ó•</div>
                    <div class="wave-status" id="waveStatus">PREPARING...</div>
                    <div class="wave-progress-bar">
                        <div class="wave-progress-fill" id="waveProgressFill"></div>
                        <div class="wave-progress-text" id="waveProgressText">0/0</div>
                    </div>
                    <div class="wave-timer" id="waveTimer"></div>
                </div>            </div>
            
            <!-- Active Upgrades Panel -->
            <div class="upgrades-container">
                <div class="upgrades-panel">
                    <div class="upgrades-title">‚ó§ NEURAL MODS ‚ó•</div>
                    <div class="upgrades-list" id="upgradesList">
                        <div class="upgrades-empty" id="upgradesEmpty">No upgrades active</div>
                    </div>
                </div>
            </div>
            
            <!-- Mini Map -->            <div class="minimap-container">
                <div class="minimap-panel">
                    <div class="minimap-title">TACTICAL MAP</div>
                    <canvas id="minimapCanvas" width="136" height="136"></canvas>
                </div>
            </div>
            

            
            <!-- Changelog Panel -->
            <div class="changelog-overlay hidden" id="changelogOverlay">                <div class="changelog-panel">
                    <div class="changelog-header">
                        <div class="changelog-title">‚ó§ NEUROCORE CHANGELOG ‚ó•</div>
                        <div class="changelog-version">v1.3.0 - Neural Enhancement Update</div>
                    </div>
                    <div class="changelog-content">                        <div class="changelog-section">
                            <div class="changelog-section-title">‚ó¶ NEW FEATURES ‚ó¶</div>
                            <div class="changelog-item">‚Ä¢ **Survival Time Tracker** - Real-time timer showing time survived (MM:SS format)</div>
                            <div class="changelog-item">‚Ä¢ **Dual Audio System** - Loading Intro music for splash screens, Futuristic Action music for gameplay</div>
                            <div class="changelog-item">‚Ä¢ Complete difficulty system with 4 tiers (Easy/Medium/Hard/Extreme)</div>
                            <div class="changelog-item">‚Ä¢ Difficulty selection screen with detailed stats and descriptions</div>
                            <div class="changelog-item">‚Ä¢ Difficulty-based healing system with visual effects</div>
                            <div class="changelog-item">‚Ä¢ Change difficulty from game over screen with 'B' key</div>
                            <div class="changelog-item">‚Ä¢ Enhanced visual healing effects with green sparks and numbers</div>
                            <div class="changelog-item">‚Ä¢ Professional intro animation with studio splash screen</div>
                        </div>

                        <div class="changelog-section">
                            <div class="changelog-section-title">‚ó¶ DIFFICULTY SYSTEM ‚ó¶</div>
                            <div class="changelog-item">‚Ä¢ Easy üü¢: 150 HP, weaker enemies, healing during waves</div>
                            <div class="changelog-item">‚Ä¢ Medium üü°: 100 HP, balanced enemies, healing after waves</div>
                            <div class="changelog-item">‚Ä¢ Hard üî¥: 100 HP, tough enemies, healing every 3rd wave</div>
                            <div class="changelog-item">‚Ä¢ Extreme ‚ò†Ô∏è: 100 HP, brutal enemies, no healing ever</div>
                            <div class="changelog-item">‚Ä¢ Dynamic enemy stats: speed, health, damage based on difficulty</div>
                            <div class="changelog-item">‚Ä¢ Overclock charge rate and wave size scaling</div>
                        </div>

                        <div class="changelog-section">
                            <div class="changelog-section-title">‚ó¶ MAJOR IMPROVEMENTS ‚ó¶</div>
                            <div class="changelog-item">‚Ä¢ Enhanced settings button visibility with pulsing animation</div>
                            <div class="changelog-item">‚Ä¢ Enhanced Neural Overclock system with visual effects</div>
                            <div class="changelog-item">‚Ä¢ Improved safe zone mechanics with timer system</div>
                            <div class="changelog-item">‚Ä¢ Added wave-based enemy spawning system</div>
                            <div class="changelog-item">‚Ä¢ New BitBug enemy with dash attacks</div>
                            <div class="changelog-item">‚Ä¢ New Syntax Breaker enemy with control disruption</div>
                            <div class="changelog-item">‚Ä¢ Smooth studio logo to game logo transition sequence</div>
                        </div>                        <div class="changelog-section">
                            <div class="changelog-section-title">‚ó¶ VISUAL & UI ‚ó¶</div>
                            <div class="changelog-item">‚Ä¢ Added survival time display to combat status panel</div>
                            <div class="changelog-item">‚Ä¢ Audio fade-out effects when game starts</div>
                            <div class="changelog-item">‚Ä¢ Fixed UI panel overlapping issues</div>
                            <div class="changelog-item">‚Ä¢ Modern UI overlay system</div>
                            <div class="changelog-item">‚Ä¢ Tactical minimap with real-time tracking</div>
                            <div class="changelog-item">‚Ä¢ Enhanced visual effects system</div>
                            <div class="changelog-item">‚Ä¢ Cyberpunk-styled difficulty selection interface</div>
                            <div class="changelog-item">‚Ä¢ Improved game over screen with multiple options</div>
                        </div>
                          <div class="changelog-section">
                            <div class="changelog-section-title">‚ó¶ CONTROLS ‚ó¶</div>
                            <div class="changelog-item">‚Ä¢ WASD / Arrow Keys - Movement</div>
                            <div class="changelog-item">‚Ä¢ Mouse - Aim and shoot</div>
                            <div class="changelog-item">‚Ä¢ SPACE - Neural Dash</div>
                            <div class="changelog-item">‚Ä¢ Q - Activate Overclock</div>
                            <div class="changelog-item">‚Ä¢ H - Toggle Help System</div>
                            <div class="changelog-item">‚Ä¢ C - Toggle Changelog</div>
                            <div class="changelog-item">‚Ä¢ P - Pause/Resume Game</div>
                            <div class="changelog-item">‚Ä¢ R - Restart (when game over)</div>
                            <div class="changelog-item">‚Ä¢ D - Change Difficulty (when game over)</div>
                        </div>
                    </div>                    <div class="changelog-footer">
                        <div class="changelog-instruction">Press C to close</div>
                    </div>
                </div>
            </div>

            <!-- Help System Overlay -->
            <div class="help-overlay hidden" id="helpOverlay">
                <div class="help-panel">
                    <div class="help-header">
                        <div class="help-title">‚ó§ NEUROCORE HELP SYSTEM ‚ó•</div>
                        <div class="help-version">Complete Game Guide & Information</div>
                    </div>
                    <div class="help-content">
                        <div class="help-section">
                            <div class="help-section-title">‚ó¶ HOW TO PLAY ‚ó¶</div>
                            <div class="help-item">‚Ä¢ **Objective**: Survive as long as possible against waves of neural viruses</div>
                            <div class="help-item">‚Ä¢ **Combat**: Aim with mouse, click to shoot, eliminate all enemies in each wave</div>
                            <div class="help-item">‚Ä¢ **Survival**: Use Neural Dash (SPACE) to escape danger and avoid enemy attacks</div>
                            <div class="help-item">‚Ä¢ **Power System**: Build Overclock charge by dealing damage, activate with Q for temporary invincibility</div>
                            <div class="help-item">‚Ä¢ **Safe Zones**: Enter blue safe zones for temporary protection from enemies</div>
                            <div class="help-item">‚Ä¢ **Upgrades**: Choose neural enhancements between waves to improve your capabilities</div>
                            <div class="help-item">‚Ä¢ **Strategy**: Balance aggressive combat with strategic retreats and resource management</div>
                        </div>

                        <div class="help-section">
                            <div class="help-section-title">‚ó¶ CONTROLS ‚ó¶</div>
                            <div class="help-item">‚Ä¢ **WASD / Arrow Keys** - Movement in all directions</div>
                            <div class="help-item">‚Ä¢ **Mouse** - Aim and shoot (click to fire bullets)</div>
                            <div class="help-item">‚Ä¢ **SPACE** - Neural Dash (quick escape move with cooldown)</div>
                            <div class="help-item">‚Ä¢ **Q** - Activate Neural Overclock (when charged)</div>
                            <div class="help-item">‚Ä¢ **P** - Pause/Resume Game</div>
                            <div class="help-item">‚Ä¢ **H** - Toggle Help System (this menu)</div>
                            <div class="help-item">‚Ä¢ **C** - Toggle Changelog</div>
                            <div class="help-item">‚Ä¢ **ESC** - Close Settings Menu</div>
                            <div class="help-item">‚Ä¢ **R** - Restart Game (during pause or game over)</div>
                            <div class="help-item">‚Ä¢ **B** - Change Difficulty (when game over)</div>
                        </div>

                        <div class="help-section">
                            <div class="help-section-title">‚ó¶ ABOUT ‚ó¶</div>
                            <div class="help-item">‚Ä¢ **NeuroCore: Byte Wars** - A cyberpunk survival shooter game</div>
                            <div class="help-item">‚Ä¢ **Genre**: Top-down arcade shooter with roguelike progression</div>
                            <div class="help-item">‚Ä¢ **Theme**: Neural network defense against digital viruses</div>
                            <div class="help-item">‚Ä¢ **Features**: Wave-based combat, upgrade system, multiple difficulties</div>
                            <div class="help-item">‚Ä¢ **Developed by**: InfinityByte Studios</div>
                            <div class="help-item">‚Ä¢ **Version**: v1.3.0 - Neural Enhancement Update</div>
                            <div class="help-item">‚Ä¢ **Engine**: HTML5 Canvas with modern web technologies</div>
                        </div>

                        <div class="help-section">
                            <div class="help-section-title">‚ó¶ CHANGELOG ‚ó¶</div>
                            <div class="help-item">‚Ä¢ **Latest Update**: Enhanced audio system with dual music tracks</div>
                            <div class="help-item">‚Ä¢ **New Features**: Survival time tracker, enhanced difficulty system</div>
                            <div class="help-item">‚Ä¢ **Improvements**: Better UI layout, settings button visibility</div>
                            <div class="help-item">‚Ä¢ **Audio**: Professional intro music and gameplay background music</div>
                            <div class="help-item">‚Ä¢ **Technical**: Crossfade audio transitions, improved performance</div>
                            <div class="help-item">‚Ä¢ **Press C key to view detailed changelog**</div>
                        </div>

                        <div class="help-section">
                            <div class="help-section-title">‚ó¶ CREDITS ‚ó¶</div>
                            <div class="help-item">‚Ä¢ **Game Development**: InfinityByte Studios</div>
                            <div class="help-item">‚Ä¢ **Programming**: JavaScript/HTML5 Canvas Engine</div>
                            <div class="help-item">‚Ä¢ **Audio**: Background music from Pixabay</div>
                            <div class="help-item">‚Ä¢ **Music Tracks**:</div>
                            <div class="help-item">  - "Loading Intro.mp3" (Intro/Splash screen music)</div>
                            <div class="help-item">  - "Futuristic Action Cinematic Electronic Loop" (Gameplay music)</div>
                            <div class="help-item">‚Ä¢ **Special Thanks**: Pixabay community for royalty-free audio content</div>
                            <div class="help-item">‚Ä¢ **Technology**: Modern web standards, responsive design</div>
                            <div class="help-item">‚Ä¢ **Testing**: Cross-browser compatibility and performance optimization</div>
                        </div>
                    </div>
                    <div class="help-footer">
                        <div class="help-instruction">Press H to close</div>
                    </div>
                </div>
            </div>
              <!-- Pause Overlay -->            <div class="pause-overlay hidden" id="pauseOverlay">
                <div class="pause-panel">
                    <div class="pause-title">‚ó§ GAME PAUSED ‚ó•</div>                    <div class="pause-instructions">
                        <div class="pause-instruction">Press P to Resume</div>
                        <div class="pause-instruction">Press R to Restart Game</div>
                        <div class="pause-instruction">Press H for Help System</div>
                        <div class="pause-instruction">Press C for Changelog</div>
                    </div>
                </div>
            </div>
              <!-- Upgrade Menu Overlay -->
            <div class="upgrade-overlay hidden" id="upgradeOverlay">
                <div class="upgrade-panel">
                    <div class="upgrade-header">
                        <div class="upgrade-title">‚ó§ NEURAL ENHANCEMENT ‚ó•</div>
                        <div class="upgrade-subtitle">Choose your upgrade to evolve your combat capabilities</div>
                    </div>
                    <div class="upgrade-content">
                        <div class="upgrade-choices" id="upgradeChoices">
                            <!-- Upgrade options will be dynamically populated -->
                        </div>
                    </div>
                    <div class="upgrade-footer">
                        <div class="upgrade-instruction">Click an upgrade to select it</div>
                    </div>
                </div>
            </div>

            <!-- Settings Overlay -->
            <div class="settings-overlay hidden" id="settingsOverlay">
                <div class="settings-panel">
                    <div class="settings-header">
                        <div class="settings-title">‚ó§ NEURAL SETTINGS ‚ó•</div>
                        <div class="settings-close" id="settingsClose">‚úï</div>
                    </div>
                    <div class="settings-content">
                        <div class="settings-section">
                            <div class="settings-section-title">DISPLAY</div>
                            <div class="settings-option">
                                <label for="minimapToggle">Mini-map</label>
                                <input type="checkbox" id="minimapToggle" class="settings-checkbox" checked>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <div class="settings-section-title">CONTROLS</div>
                            <div class="settings-controls">
                                <div class="control-item">Movement: WASD / Arrow Keys</div>
                                <div class="control-item">Aim & Shoot: Mouse</div>
                                <div class="control-item">Dash: Space</div>
                                <div class="control-item">Overclock: Q</div>
                                <div class="control-item">Pause: P</div>
                                <div class="control-item">Changelog: C</div>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <div class="settings-section-title">GAME</div>
                            <div class="settings-option">
                                <label for="difficultySelect">Difficulty</label>
                                <select id="difficultySelect" class="settings-select">
                                    <option value="easy">Neural Training</option>
                                    <option value="normal" selected>Standard Protocol</option>
                                    <option value="hard">Elite Operations</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="settings-footer">
                        <div class="settings-instruction">Click outside or press ESC to close</div>
                    </div>
                </div>
            </div>        </div>
        
        <!-- Feedback Link at bottom of game -->
        <div class="feedback-container">
            <a href="https://forms.office.com/r/swdfiQLkCb" target="_blank" class="feedback-link">
                Send Feedback
            </a>
        </div>        <!-- Game Over Screen -->
        <div class="game-over-overlay" id="gameOverScreen" style="display: none;">
            <div class="game-over-title">SYSTEM FAILURE</div>
            <div class="game-over-stats" id="finalScore">Final Score: 0</div>
            <div class="game-over-stats" id="finalKills">Enemies Eliminated: 0</div>
            <div class="game-over-instructions">
                <div class="game-over-instruction">Press R to restart neural systems</div>
                <div class="game-over-instruction">Press B to change difficulty</div>
            </div>
        </div>

        <!-- Difficulty Selection Screen -->
        <div class="difficulty-overlay" id="difficultyScreen" style="display: none;">
            <div class="difficulty-container">
                <div class="difficulty-title">‚ó§ SELECT NEURAL DIFFICULTY ‚ó•</div>
                <div class="difficulty-subtitle">Choose your combat parameters</div>
                
                <div class="difficulty-options">
                    <div class="difficulty-option" data-difficulty="easy">
                        <div class="difficulty-emoji">üü¢</div>
                        <div class="difficulty-name">EASY</div>
                        <div class="difficulty-description">New/casual players. More health, weaker enemies, healing during waves.</div>
                        <div class="difficulty-stats">
                            <div class="stat-item">Health: 150</div>
                            <div class="stat-item">Enemy Speed: 70%</div>
                            <div class="stat-item">Healing: During waves</div>
                        </div>
                    </div>
                    
                    <div class="difficulty-option" data-difficulty="medium">
                        <div class="difficulty-emoji">üü°</div>
                        <div class="difficulty-name">MEDIUM</div>
                        <div class="difficulty-description">Standard gameplay. Balanced difficulty, heal after waves.</div>
                        <div class="difficulty-stats">
                            <div class="stat-item">Health: 100</div>
                            <div class="stat-item">Enemy Speed: 100%</div>
                            <div class="stat-item">Healing: After waves</div>
                        </div>
                    </div>
                    
                    <div class="difficulty-option" data-difficulty="hard">
                        <div class="difficulty-emoji">üî¥</div>
                        <div class="difficulty-name">HARD</div>
                        <div class="difficulty-description">Skilled players. Faster, tougher enemies. Heal every 3 waves.</div>
                        <div class="difficulty-stats">
                            <div class="stat-item">Health: 100</div>
                            <div class="stat-item">Enemy Speed: 130%</div>
                            <div class="stat-item">Healing: Every 3rd wave</div>
                        </div>
                    </div>
                    
                    <div class="difficulty-option" data-difficulty="extreme">
                        <div class="difficulty-emoji">‚ò†Ô∏è</div>
                        <div class="difficulty-name">EXTREME</div>
                        <div class="difficulty-description">Hardcore challenge. Very tough enemies, no healing ever.</div>
                        <div class="difficulty-stats">
                            <div class="stat-item">Health: 100</div>
                            <div class="stat-item">Enemy Speed: 160%</div>
                            <div class="stat-item">Healing: Never</div>
                        </div>
                    </div>
                </div>
                
                <div class="difficulty-footer">
                    <div class="difficulty-hint">Click a difficulty to begin your neural journey</div>
                </div>
            </div>
        </div>
    </div>    <script src="js/input.js"></script>
    <script src="js/bullet.js"></script>
    <script src="js/weapon.js"></script>
    <script src="js/arena.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/difficultyManager.js"></script>
    <script src="js/enemy.js"></script>
    <script src="js/enemyManager.js"></script>
    <script src="js/upgradeSystem.js"></script>
    <script src="js/visualEffects.js"></script>
    <script src="js/modernUI.js"></script>
    <script src="js/player.js"></script>
    <script src="js/game.js"></script>
    
    <!-- Firebase SDK (for playtime tracking) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <!-- Playtime Tracking -->
    <script src="game-playtime-tracker.js" type="module"></script>
    <script>
      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCo5hr7ULHLL_0UAAst74g8ePZxkB7OHFQ",
        authDomain: "shared-sign-in.firebaseapp.com",
        databaseURL: "https://shared-sign-in-default-rtdb.firebaseio.com/",
        projectId: "shared-sign-in",
        storageBucket: "shared-sign-in.firebasestorage.app",
        messagingSenderId: "332039027753",
        appId: "1:332039027753:web:aa7c6877d543bb90363038",
        measurementId: "G-KK5XVVLMVN"
      };
      
      // Initialize Firebase if not already initialized
      if (typeof firebase !== 'undefined' && (!firebase.apps || !firebase.apps.length)) {
          firebase.initializeApp(firebaseConfig);
      }
      
      // ByteWars Playtime Tracking
      document.addEventListener('DOMContentLoaded', async () => {
        console.log('Initializing playtime tracking for ByteWars');
        
        // Create and initialize the playtime tracker
        const tracker = new GamePlaytimeTracker();
        await tracker.init('bytewars', 'NeuroCore: Byte Wars', true);
        
        // Store the tracker instance for debugging
        window.playtimeTracker = tracker;
        
        // Start tracking playtime
        tracker.startTracking();
        
        // Dispatch game started event
        window.dispatchEvent(new CustomEvent('gameStarted'));
        
        // Handle visibility changes
        document.addEventListener('visibilitychange', () => {
          if (document.hidden && tracker && tracker.isTracking) {
            console.log('Tab hidden - saving current playtime');
            tracker.savePlaytimeData();
          } else if (!document.hidden && tracker && !tracker.isTracking) {
            console.log('Tab visible again - resuming playtime tracking');
            tracker.startTracking();
          }
        });
        
        // Handle page unload
        window.addEventListener('beforeunload', () => {
          if (tracker && tracker.isTracking) {
            console.log('Page unloading - saving final playtime');
            tracker.savePlaytimeData();
          }
        });
      });
    </script>
    
    <script>
        // Initialize game when page loads
        window.addEventListener('load', () => {
            console.log('Page loaded, initializing game...');
            window.game = new Game(); // Make game accessible globally for testing
        });
    </script>
</body>
</html>
